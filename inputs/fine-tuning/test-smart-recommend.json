{
  "description": "Test integrated smart recommendation workflow",
  "endpoint": "POST /fine-tuning/smart-recommend",
  "expectedResult": "Complete workflow: Intent classification → Enhanced RAG search → Smart recommendations",
  "testCases": [
    {
      "name": "Gift recommendation with fine-tuned model",
      "payload": {
        "query": "regalo para mi mamá que le gusta cocinar, presupuesto máximo $150",
        "useFineTuned": true,
        "maxProducts": 3
      },
      "expectedWorkflow": [
        "Step 1: Fine-tuned model classifies intent as GIFT, cooking category, mid_range budget",
        "Step 2: Enhanced RAG search with context hints",
        "Step 3: Personalized recommendations considering recipient and budget"
      ],
      "expectedIntentClassification": {
        "intent_type": "GIFT",
        "category": "hogar",
        "budget_tier": "mid_range",
        "recipient": "mother",
        "context_tags": ["cooking", "gift"]
      }
    },
    {
      "name": "Business need with urgency (fine-tuned)",
      "payload": {
        "query": "URGENTE: necesito auriculares para trabajo remoto, calidad premium",
        "useFineTuned": true,
        "maxProducts": 2
      },
      "expectedWorkflow": [
        "Step 1: Classifies as URGENT/BUSINESS intent, premium budget",
        "Step 2: Search prioritizes professional audio equipment",
        "Step 3: Recommends high-quality work-oriented products with urgency context"
      ]
    },
    {
      "name": "Personal use with base model (comparison)",
      "payload": {
        "query": "zapatillas para correr, algo económico pero de calidad",
        "useFineTuned": false,
        "maxProducts": 3
      },
      "expectedWorkflow": [
        "Step 1: Base model may fail intent classification",
        "Step 2: Basic RAG search without intent enhancement",
        "Step 3: General recommendations without specialized context"
      ],
      "note": "This should demonstrate the difference between base and fine-tuned models"
    }
  ],
  "performanceExpected": {
    "withFineTuned": "~12s total (9s intent + 0.1s search + 3s recommendation)",
    "withBase": "~4s total (2s intent + 0.1s search + 2s recommendation)",
    "accuracy": "Fine-tuned: 100% intent accuracy, Base: ~0% intent accuracy"
  },
  "integrationFeatures": [
    "✅ Fine-tuned intent classification with 100% accuracy",
    "✅ Context-enhanced RAG search using classified intent",
    "✅ Personalized recommendations considering intent, budget, and recipient",
    "✅ Performance comparison between base and fine-tuned models",
    "✅ Complete workflow visibility with step-by-step breakdown"
  ],
  "notes": [
    "This endpoint represents the complete integration of fine-tuning with existing RAG and recommendation systems",
    "Fine-tuned model provides perfect intent classification, enhancing search and recommendations",
    "Users can choose between speed (base model) and accuracy (fine-tuned model)",
    "Response includes full workflow breakdown for transparency and debugging"
  ]
}